#########################
#
# Test functions for phase 0
#
#########################
setup_requirements()
{
	local host=$1
	echo "Setting up needed packages on $host"
	tp $host "zypper install --no-confirm opensm infiniband-diags rdma-ndd libibverbs-utils srp_daemon fabtests mpitests-mvapich2 mpitests-openmpi mpitests-openmpi2 mpitests-mpich ibutils dapl-utils targetcli-fb nvme-cli nvmetcli psmisc nfs-kernel-server"
}

kill_opensm()
{
	local host=$1
	tp $host 'killall opensm || true; sleep 1; killall -9 opensm || true';
}
reset_all_ports()
{
	local host=$1

	tp $host "for port_id in \$(seq 1 \$(ibstat -p | wc -l)); do
	   		 	   ibportstate -D 0 \$port_id reset;
			   done"
}
